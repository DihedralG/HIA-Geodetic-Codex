<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ChiR Labs — V4.2 Functional Spec (Harmonic Watershed Resonance)</title>
  <link rel="stylesheet" href="styles/main.css"/>
  <meta name="description" content="V4.2 formalizes watersheds as resonance organs: tri-river fans, headwater radials, and karst basins tuned to long-wave hydrologic harmonics and Codex node behavior over 10⁴–10⁶ years (ten thousand to one million years)."/>
</head>
<body>
  <header>
    <h1>🌀 ChiR Labs</h1>
    <p>Mapping trust, resonance, and planetary intelligence.</p>
  </header>

  <nav>
    <a href="index.html"> 🌀 <span>Root</span></a>
    <a href="chir-ai.html"> 🧠 <span>ChiR-AI</span></a>
    <a href="chiripp.html"> 💠 <span>ChiR-IPP</span></a>
    <a href="codex.html"> 🌐 <span>Codex</span></a>
    <a href="psl.html"> 🕊 <span>PSL</span></a>
    <a href="about.html"> 🧭 <span>About</span></a>
    <a href="support.html"> 🌱 <span>Growth</span></a>
  </nav>

  <main class="container">
    <aside class="context-blurb">
      <h1>V4.2 Functional Specification: <i>Harmonic Watershed Resonance</i></h1>
      
      Watersheds are modeled as <b>frequency stabilizers</b> and <b>resonance organs</b>: tri-fan confluences, radial headwaters, and karst basins that amplify or buffer long-wave signals and align with Codex nodes via <b>G = V × H²</b>.
    </aside>

    <section>
      <h2>Overview</h2>
      <p>
        V4.2 extends V3.6 hydrology by treating basin geometry as a tuning system. We quantify how <b>fan symmetry</b>, <b>divide curvature</b>, and <b>karst porosity</b> shape the harmonic field <b>H</b>; then we test whether watershed “organs” increase node stability, discharge control, or signal clarity during deglacial pulses (handoff from V4.1).
      </p>
    </section>

    <section>
      <h2>Key Findings</h2>
      <ul>
        <li><b>Tri-river fan resonance:</b> Major threefold confluences and deltas exhibit coherent phase behavior (reduced timing jitter) and elevated <b>G</b> near Codex nodes.</li>
        <li><b>Radial headwaters:</b> Mountain “sunburst” divides (5–12 spokes) correlate with predictable corridor activation and terrace pacing during sea-level and precipitation shifts.</li>
        <li><b>Karst chambers:</b> Basin-scale karst networks act as low-pass filters, dampening high-frequency floods while preserving long-cycle aquifer signals (boosts HTCI components A<sub>g</sub>, Ψ<sub>σK</sub>).</li>
        <li><b>Architectural coupling:</b> Pyramidal/mound complexes at fan termini (e.g., platform towns, causewayed enclosures) sit on maxima of modeled resonance clarity.</li>
      </ul>
    </section>

    <section>
      <h2>Data Inputs</h2>
      <div class="scroll-x">
        <table class="compact">
          <thead><tr><th>Layer</th><th>Source Types</th><th>Use in Model</th></tr></thead>
          <tbody>
            <tr><td>DEM/DTM</td><td>1–30 m relief; divide maps</td><td>Radial spokes, curvature, flow routing</td></tr>
            <tr><td>Hydrography</td><td>Rivers, confluences, deltas</td><td>Tri-fan detection; resonance loci</td></tr>
            <tr><td>Karst & Subsurface</td><td>Doline/cave inventories; transmissivity</td><td>Porosity fields; low-pass filter parameterization</td></tr>
            <tr><td>Sediment Systems</td><td>Fan thickness; terrace rasters; grain size</td><td>Attenuation/delay estimation</td></tr>
            <tr><td>Mineralogy (V3.5)</td><td>Quartz/feldspar indices; fabric</td><td>Resonant media weighting in H</td></tr>
            <tr><td>Chronologies</td><td>Varves; OSL/IRSL; tephra</td><td>Timing calibration; ±σ propagation</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <h2>Methods</h2>
      <ol>
        <li><b>Fan & Radial Extraction:</b> Detect tri-fan confluences (≥3 primary channels within θ tolerance) and headwater radials via divide curvature + spoke count.</li>
        <li><b>Resonance Field H:</b> Compose <i>H</i> from (a) basin geometry (curvature, bifurcation ratios), (b) karst porosity/connectedness, (c) mineral resonance score (V4.10).</li>
        <li><b>Signal Metrics:</b> Estimate phase stability (φ), attenuation (α), and delay (τ) using synthetic hydrographs and paleoflow constraints.</li>
        <li><b>ChiR Coupling:</b> Compute <b>G = V × H²</b> for corridors and nodes; compare ΔG across deglacial pulse windows (handoff from V4.1).</li>
        <li><b>Temporal Anchoring:</b> Tie terrace/fan growth and karst speleothem phases to event stacks; propagate joint uncertainty.</li>
      </ol>
    </section>

    <section>
      <h2>Algorithm Hooks (ChiR Library)</h2>
      <div class="scroll-x">
        <table class="compact">
          <thead><tr><th>Function</th><th>Description</th><th>I/O</th></tr></thead>
          <tbody>
            <tr>
              <td><code>chir.watershed.find_tri_fans(hydro, dem, theta=35)</code></td>
              <td>Identify tri-river confluences/fans and geometry</td>
              <td>Lines+raster → features {apex, arms, area, slope}</td>
            </tr>
            <tr>
              <td><code>chir.watershed.radial_headwaters(divides, k=5..12)</code></td>
              <td>Detect radial spoke systems at headwaters</td>
              <td>Divide raster → spokes, symmetry score</td>
            </tr>
            <tr>
              <td><code>chir.karst.porosity_field(dolines, caves, T)</code></td>
              <td>Build karst porosity/connectedness grid</td>
              <td>Points+lines+transmissivity → porosity H-term</td>
            </tr>
            <tr>
              <td><code>chir.harmonics.compose_H(geom, karst, mineral)</code></td>
              <td>Combine geometry/karst/mineral into H</td>
              <td>Grids → H grid [0,1]</td>
            </tr>
            <tr>
              <td><code>chir.harmonics.phi_alpha_tau(fan, hydrograph)</code></td>
              <td>Phase stability, attenuation, delay estimators</td>
              <td>Fan feature + Q(t) → {φ, α, τ}</td>
            </tr>
            <tr>
              <td><code>chir.harmonics.compute_G(V,H)</code></td>
              <td>Return resonance scalar/array</td>
              <td>V,H → G</td>
            </tr>
          </tbody>
        </table>
      </div>
      <p class="note">Phase metrics (φ, α, τ) are reported per-feature and aggregated to corridors for cross-basin comparison.</p>
    </section>

    <section>
      <h2>Model Outputs</h2>
      <ul>
        <li><b>Resonance Atlas:</b> tri-fan and radial headwater maps with symmetry and phase metrics.</li>
        <li><b>H-Grids:</b> basin-scale harmonic fields incorporating karst and mineral weighting.</li>
        <li><b>Node Coupling:</b> ΔG stacks per pulse window; ranked stability/clarity indices for Codex nodes.</li>
      </ul>
    </section>

    <section>
      <h2>Validation & Reproducibility</h2>
      <ul>
        <li><b>Hydrograph fit:</b> compare modeled α, τ against gauged floods (where available) and terrace/varve chronologies.</li>
        <li><b>Null topology:</b> randomize confluence angles and spoke counts; verify observed symmetry scores exceed null.</li>
        <li><b>Cross-module checks:</b> ensure H-agreement with V3.6 HTCI components and V4.1 ΔG timing.</li>
      </ul>
    </section>

    <section>
      <h2>Bridges</h2>
      <ul>
        <li><b>From V4.1:</b> uses pulse windows and ΔV fields.</li>
        <li><b>To V4.3:</b> exports karst-weighted H for subterranean memory encoding.</li>
        <li><b>To V4.7:</b> flags lowland sacred drainage candidates at fan termini for cultural coupling tests.</li>
      </ul>
    </section>

    <nav class="version-nav" aria-label="Version navigation">
      <div class="version-nav__row">
        <a class="vbtn vbtn--ghost" href="v4func-detail-1.html" rel="prev">← V4.1</a>
        <a class="vbtn vbtn--primary" href="preview.html">Peer Review Root</a>
        <a class="vbtn vbtn--ghost" href="v4func-detail-3.html" rel="next">V4.3 →</a>
        <p>&nbsp;</p>
      </div>
    </nav>

    <div align="center">
      <footer>
        <p>&copy; 2025 ChiR Labs | Geodetic Codex</p>
      </footer>
    </div>
  </main>
</body>
</html>