<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ChiRIPP Peer Review</title>
  <link rel="stylesheet" href="styles/main.css" />
  <script defer>
    async function submitPeerReview(event) {
      event.preventDefault();

      const fileInput = document.getElementById('uploadFile');
      const contentType = document.getElementById('contentType').value;
      const instructions = document.getElementById('instructions').value;
      const accessCode = document.getElementById('accessCode').value;
      const email = document.getElementById('email').value;

      // Access control: require email or valid code
      if (!email && accessCode !== "GEO2025") {
        alert("Please provide a valid access code or an email address.");
        return;
      }

      const formData = new FormData();
      formData.append("file", fileInput.files[0]);
      formData.append("content_type", contentType);
      formData.append("instructions", instructions);
      formData.append("email", email || "anonymous@chirlabs.org");

      try {
        const response = await fetch("https://hook.us2.make.com/REPLACE_WITH_YOUR_WEBHOOK", {
          method: "POST",
          body: formData
        });

        if (!response.ok) throw new Error("Upload failed.");
        alert("File submitted for peer review! Check back or follow up via email for status.");
        document.getElementById("uploadForm").reset();
      } catch (err) {
        alert("Error: " + err.message);
      }
    }
  </script>
</head>

<body>

  <header>
    <h1>ChiR Labs & Meadow House Observatory</h1>
    <p>Where Ancient Wisdom Meets Modern Geodesy & HPC</p>
  </header>

   <nav>
    <a href="index.html"> <img src="./assets/glyphs/glyph_6.png" alt="Home" class="nav-icon" />  </a>
    <a href="peer-review.html"> <img src="./assets/glyphs/glyph_1.png" alt="Peer Review" class="nav-icon" /> </a>
    <a href="geodetic-codex.html"><img src="./assets/glyphs/glyph_2.png" alt="Codex" class="nav-icon" /> </a>
    <a href="chiripp.html"><img src="./assets/glyphs/glyph_3.png" alt="ChiRIPP" class="nav-icon" /> </a>
    <a href="psl.html"><img src="./assets/glyphs/glyph_4.png" alt="PSL" class="nav-icon" /> </a>
    <a href="about.html"><img src="./assets/glyphs/glyph_5.png" alt="About" class="nav-icon" /> </a>
  </nav>
  
  <main class="container">
    <h2>ðŸ§ª ChiRIPP Peer Review Submission</h2>
    <p>Submit a file for analysis and review. Accepted types include:</p>
    <ul>
      <li>ðŸ“· Images (artifact photos, glyphs)</li>
      <li>ðŸ“œ Text-based research quotes</li>
      <li>ðŸ“„ PDF or paper excerpts</li>
    </ul>

    <form id="uploadForm" onsubmit="submitPeerReview(event)">
      <label for="uploadFile">Select File:</label><br>
      <input type="file" id="uploadFile" required /><br><br>

      <label for="contentType">Content Type:</label><br>
      <select id="contentType" required>
        <option value="photo">Photo</option>
        <option value="paper">Paper</option>
        <option value="quote">Quote</option>
      </select><br><br>

      <label for="instructions">Instructions (optional):</label><br>
      <textarea id="instructions" rows="4" placeholder="Any special notes for reviewers or the AI..."></textarea><br><br>

      <label for="email">Email (optional):</label><br>
      <input type="email" id="email" placeholder="you@example.com" /><br><br>

      <label for="accessCode">Access Code:</label><br>
      <input type="password" id="accessCode" placeholder="GEO2025" /><br><br>

      <button type="submit">ðŸš€ Submit for Processing</button>
    </form>
  </main>

  <footer>
    <p>Â© 2025 ChiR Labs | The Dihedral Group | Meadow House Observatory</p>
  </footer>

</body>
</html>
